<meta name=viewport content="width=device-width,initial-scale=1.0"><style>*{margin:0;border:0;box-sizing:border-box;font-family:system-ui,sans-serif}body{min-height:100dvh;display:flex;flex-direction:column;gap:2rem;justify-content:center;align-items:center;padding:1rem}#cv{max-width:100%;border-radius:.5rem;outline:1px solid #d4d4d4}#f{display:flex;flex-direction:column;gap:1rem}.lb{display:block;margin-bottom:.5rem;color:#262626;font:600 1rem/1.5}.i{width:100%;padding:.5rem;outline:1px solid #d4d4d4;border-radius:.375rem}.i::-webkit-file-upload-button{appearance:none;cursor:pointer;border:0;background:#0369a1;color:#fff;padding:.5rem 1rem;margin-right:.5rem;border-radius:.25rem}.b{width:100%;padding:.5rem 1rem;cursor:pointer;background:#0369a1;color:#fff;font:600 1rem/1.5;border-radius:.375rem;transition:.15s ease}.b:hover{background:#0284c7}#ac{display:none;flex-direction:column;gap:1rem}@media (min-width:768px){body{padding:3rem}}@media (min-width:1020px){body{padding:1rem;flex-direction:row;justify-content:space-around}#cv{max-width:28rem}}</style><canvas id=cv></canvas><form id=f><div><label class=lb for=i>Choose an Image</label> <input accept=image/* class=i id=i name=i type=file></div><button class=b type=submit>Run</button><div hidden id=ac><button class=b id=di type=button>Download Image</button><button class=b id=dd type=button>Download Pixel Data</button></div></form><script>function w(e){let n=e.length,t;for(;n!=0;)t=Math.floor(Math.random()*n),n--,[e[n],e[t]]=[e[t],e[n]];return e}function h(e,n="d"){e instanceof File&&(n=e.name,e=new Blob([e],{type:e.type}));let t=URL.createObjectURL(e),a=document.createElement("a");return a.href=t,a.download=n,a.click(),URL.revokeObjectURL(t),{success:!0}}const g=s("f"),d=s("cv");let i,m=d.getContext("2d");function s(e){return document.getElementById(e)}s("i").onchange=e=>{let n=e.target.files[0],t=new Image;t.src=URL.createObjectURL(n),t.onload=g=>{d.width=t.width,d.height=t.height,m.drawImage(t,0,0)}};g.onsubmit=async e=>{e.preventDefault();let n=s("i").files[0],t=new Image;t.src=URL.createObjectURL(n),t.onload=async()=>{i=new OffscreenCanvas(t.width,t.height);let a=i.getContext("2d",{willReadFrequetly:!0});a.drawImage(t,0,0);let c=a.getImageData(0,0,i.width,i.height),o=Array.from(c.data).reduce((l,r,f)=>(f%4==0?l.push([r]):l[l.length-1].push(r),l),[]);o=w(o);let u=new ImageData(new Uint8ClampedArray(o.flat()),i.width,i.height);for(let l of o)c.data.set(l);d.width=i.width,d.height=i.height,m.putImageData(u,0,0),s("ac").style.display="flex"}};s("di").onclick=async()=>{h(await new Promise(l=>d.toBlob(l)),"scrambled.png")};s("dd").onclick=g=>{h(new Blob([JSON.stringify(o)],{type:"application/json"}),"pixels.json")};</script>